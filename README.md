## VK выпечка — тестовое задание
### Описание
   Бот для VK, позволяющий просматривать каталог выпечки через удобную навигацию кнопками.
   Категории, товары и изображения хранятся локально, состояние пользователя — в SQLite.

### Функциональность
- Каталог из 4 категорий с товарами, описанием и фотографиями, хранящийся в SQLite (ORM SQLAlchemy).
- Навигация только кнопками: категории → товары → карточка. Из карточки всегда можно вернуться в главное меню каталога.
- Логика построена на машине состояний (`transitions`), состояние и контекст пользователя сохраняются в таблице `user_sessions`.
- Данные заполняются автоматически через `src/db/seed.py`, изображения находятся в каталоге `images/`.
- Реализован запуск проекта в Docker.
- Реализованы тесты основного функционала бота на Pytest

### Переменные окружения
Перед запуском создайте файл `.env` в корне проекта:
   ```env
   VK_GROUP_TOKEN=Ваш токен
   DATABASE_URL=sqlite:///vk_bot.db
   SQL_ECHO=False
   ```

### Запуск
1. **Локально (Poetry)**
   1. Укажите токен вашей группы VK в переменной окружения .env:
   2. Установите Poetry (если ещё не установлен):
   ```bash
   pip install poetry
   ```
   3. Установите зависимости проекта:
   ```bash
   poetry install
    ```
   4. Запустите бота. тестовые данные автоматически заполнятся.
   ```bash
   poetry run python main.py
   ```
2. **Docker**
   ```bash
   docker build -t vk-bakery .
   docker run --env-file .env vk-bakery
   ```
3. **Docker Compose**
   ```bash
   docker compose up --build
   ```
   Переменные окружения читаются из `.env`. База данных сохраняется в файле  `vk_bot.db`.

4. Автотесты 
   ```
   poetry install
   poetry run pytest
   ```
   
### Машина состояний
| `START`             | приветствие, вывод категорий |
| `CATEGORY_SELECTED` | ожидание выбора категории |
| `PRODUCT_SELECTED`  | отображение товаров категории |
| `PRODUCT_DETAILS`   | показ карточки товара |


